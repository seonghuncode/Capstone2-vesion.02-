<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<!-- sideBarFragment의경우 왼쪽 사이드바에 해당 하는 코드 -->
<header th:fragment="sideBarFragment(pageName)">


    <!-- Sidebar --------------------------------------------------------------------------------------------------------------------------->
    <div id="sidebar">
        <div class="inner">

            <!-- Search ---------------------------------------------------------------------------------------------------------------->
            <!--            <section id="search" class="alt">-->
            <!--                <form method="post" action="#">-->
            <!--                    <input type="text" name="query" id="query" placeholder="Search"/>-->
            <!--                </form>-->
            <!--            </section>-->

            <!-- Menu바  ---------------------------------------------------------------------------------------------------------------->
            <nav id="menu" style="border-bottom: solid 0px;">
                <!-- border-bottom: solid 0px; : 메뉴 추가하는 플러스 아이콘 아래 밑줄 생기는 것 제거 -->
                <header class="major" style="margin-bottom: 30px">
                    <h2 style="display: inline">Menu</h2>
                    <h2 style="border-bottom: solid 1px white; float: right"><a href="logout">로그아웃</a></h2>
                </header>
                <br>
                <ul>
                    <!--                    <div th:each="menu : ${menuList}" style="display: inline">-->
                    <!--                        <li th:if="${menu.title == '메인'}"  style="display: inline">-->
                    <!--                            <a href="mainPage" style="display: inline">메인</a>-->
                    <!--                            <div th:if="${authority == '관리자'}" style="display: inline;">-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>-->
                    <!--                                <a href="#" style="display: inline; float: right"><i-->
                    <!--                                        class="bi bi-trash">&nbsp;&nbsp;</i></a>-->
                    <!--                            </div>-->
                    <!--                        </li>-->
                    <!--                        <li th:if="${menu.title == '공지'}">-->
                    <!--                            <a href="notification" style="display: inline">공지</a>-->
                    <!--                            <div th:if="${authority == '관리자'}" style="display: inline;">-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-trash"> &nbsp;</i></a>-->
                    <!--                            </div>-->
                    <!--                        </li>-->
                    <!--                        <li th:if="${menu.title == '규칙'}">-->
                    <!--                            <a href="rules" style="display: inline">규칙</a>-->
                    <!--                            <div th:if="${authority == '관리자'}" style="display: inline;">-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>-->
                    <!--                                <a href="#" style="display: inline; float: right"><i-->
                    <!--                                        class="bi bi-trash">&nbsp;&nbsp;</i></a>-->
                    <!--                            </div>-->
                    <!--                        </li>-->
                    <!--                        <li th:if="${menu.title == '조직도'}">-->
                    <!--                            <a href="organizationalChart" style="display: inline">조직도</a>-->
                    <!--                            <div th:if="${authority == '관리자'}" style="display: inline;">-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>-->
                    <!--                                <a href="#" style="display: inline; float: right"><i-->
                    <!--                                        class="bi bi-trash">&nbsp;&nbsp;</i></a>-->
                    <!--                            </div>-->
                    <!--                        </li>-->
                    <!--                        <li th:if="${menu.title == '회비내역'}">-->
                    <!--                            <a href="moneyHistory" style="display: inline">회비내역</a>-->
                    <!--                            <div th:if="${authority == '관리자'}" style="display: inline;">-->
                    <!--                                <a href="#" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>-->
                    <!--                                <a href="#" style="display: inline; float: right"><i-->
                    <!--                                        class="bi bi-trash">&nbsp;&nbsp;</i></a>-->
                    <!--                            </div>-->
                    <!--                        </li>-->
                    <!--                    </div>-->


                    <li th:each="menu : ${menuList}">
                              <span th:if="${menu.title == '메인'}">
                            <a href="mainPage" style="display: inline">메인</a>
                            <div th:if="${authority == '관리자'}" style="display: inline;">
                                     <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                                <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i
                                        class="bi bi-trash">&nbsp;&nbsp;</i></a>
                            </div>
                              </span>
                        <span th:if="${menu.title == '공지'}">
                             <a href="notification" style="display: inline">공지</a>
                        <div th:if="${authority == '관리자'}" style="display: inline;">
                             <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                            <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"> &nbsp;</i></a>
                        </div>
                        </span>
                        <span th:if="${menu.title == '규칙'}">
                              <a href="rules" style="display: inline">규칙</a>
                        <div th:if="${authority == '관리자'}" style="display: inline;">
                             <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                            <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i
                                    class="bi bi-trash">&nbsp;&nbsp;</i></a>
                        </div>
                        </span>
                        <span th:if="${menu.title == '조직도'}">
                               <a href="organizationalChart" style="display: inline">조직도</a>
                        <div th:if="${authority == '관리자'}" style="display: inline;">
                             <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                            <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i
                                    class="bi bi-trash">&nbsp;&nbsp;</i></a>
                        </div>
                        </span>
                        <span th:if="${menu.title == '회비내역'}">
                             <a href="moneyHistory" style="display: inline">회비내역</a>
                        <div th:if="${authority == '관리자'}" style="display: inline;">
                            <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                           <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i
                                    class="bi bi-trash">&nbsp;&nbsp;</i></a>
                        </div>
                        </span>
                        <!--
                        기본 default로 존재하지 않고 관리자가 추가적으로 만든 메뉴 이름에 대해서 보여주는 부분
                        (메뉴 이름이 만들어지고 페이지, 이동 주소가 따로 생성 되지 않는다다)                        -->
                        <span th:unless="${menu.title == '메인' or menu.title == '공지' or menu.title == '규칙' or menu.title == '조직도' or menu.title == '회비내역'}">
                             <a href="# " style="display: inline" th:text="${menu.title}"></a>
                        <div th:if="${authority == '관리자'}" style="display: inline;">
                           <a href="javascript:void(0)" th:onclick="'modifyMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i class="bi bi-pencil-fill"></i></a>
                            <a href="javascript:void(0)" th:onclick="'deleteMenu(' + ${menu.id} + ')'" style="display: inline; float: right"><i
                                    class="bi bi-trash">&nbsp;&nbsp;</i></a>
                        </div>
                        </span>
                    </li>

                    <!-- 메뉴 새로만들기 클릭시 작은 새 페이지 띄우기 -->
                    <li th:if="${authority == '관리자'}"><a
                            href="javascript:void(window.open('/doMakeNewMenu', '새로운 메뉴탭 생성','width=640, height=400'))"
                            style="float: right"><i
                            class="bi bi-plus-circle fs-2"></i></a></li> <!-- 추가 번튼 -->
                    <!--										<li>-->   <!-- 메뉴텝에 버튼 추가시 필요 -->
                    <!--											<span class="opener">Submenu</span>-->
                    <!--											<ul>-->
                    <!--												<li><a href="#">Lorem Dolor</a></li>-->
                    <!--												<li><a href="#">Ipsum Adipiscing</a></li>-->
                    <!--												<li><a href="#">Tempus Magna</a></li>-->
                    <!--												<li><a href="#">Feugiat Veroeros</a></li>-->
                    <!--											</ul>-->
                    <!--										</li>-->
                    <!--										<li><a href="#">Etiam Dolore</a></li>-->
                    <!--										<li><a href="#">Adipiscing</a></li>-->
                    <!--										<li>-->
                    <!--											<span class="opener">Another Submenu</span>-->
                    <!--											<ul>-->
                    <!--												<li><a href="#">Lorem Dolor</a></li>-->
                    <!--												<li><a href="#">Ipsum Adipiscing</a></li>-->
                    <!--												<li><a href="#">Tempus Magna</a></li>-->
                    <!--												<li><a href="#">Feugiat Veroeros</a></li>-->
                    <!--											</ul>-->
                    <!--										</li>-->
                    <!--										<li><a href="#">Maximus Erat</a></li>-->
                    <!--										<li><a href="#">Sapien Mauris</a></li>-->
                    <!--										<li><a href="#">Amet Lacinia</a></li>-->
                </ul>
            </nav>

            <!-- Section 회원 셍일--------------------------------------------------------------------------------------------------------------->
            <section>
                <header class="major">
                    <h2>소방 인원 생일</h2>
                </header>
                <!--                <div class="mini-posts">-->
                <!--                    <article>-->
                <!--                        <a href="#" class="image"><img src="images/pic07.jpg" alt=""/></a>-->
                <!--                        <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>-->
                <!--                    </article>-->
                <!--                    <article>-->
                <!--                        <a href="#" class="image"><img src="images/pic08.jpg" alt=""/></a>-->
                <!--                        <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>-->
                <!--                    </article>-->
                <!--                    <article>-->
                <!--                        <a href="#" class="image"><img src="images/pic09.jpg" alt=""/></a>-->
                <!--                        <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>-->
                <!--                    </article>-->
                <!--                </div>-->


                <!-- 생일 월을 증가, 감소 하는 버튼 ------------------------------------------------------------------------------------------------>
                <nav aria-label="Page navigation example">
                    <ul class="pagination" style="padding: 0px; justify-content: right">
                        <li class="page-item" style="padding: 0px">
                            <!--                            <a class="page-link" href="#" aria-label="Previous">-->
                            <!--                                <span aria-hidden="true">&laquo;</span>-->
                            <!--                            </a>-->
                        </li>
                        <li class="page-item"><a class="page-link" href="#"
                                                 th:text=" '현재월 : ' + ${#strings.substring(getBirthdayInfo[0].birth_date,6, 7)}">현재월이
                            표시됨</a></li>
                        <li class="page-item" style="padding: 0px">
                            <!--                            <a class="page-link" href="#" aria-label="Next">-->
                            <!--                                <span aria-hidden="true">&raquo;</span>-->
                            <!--                            </a>-->
                        </li>
                    </ul>
                </nav>

                <div th:fragment="sideBarFragment(activeMenu)">
                    <table class="table table-sm" style="text-align: center">
                        <thead>
                        <tr>
                            <th style="text-align: center" scope="col">날짜</th>
                            <th style="text-align: center" scope="col">이름</th>
                            <th style="text-align: center" scope="col">직책</th>
                        </tr>
                        </thead>
                        <div th:each="item : ${getBirthdayInfo}">
                            <tbody>
                            <tr>
                                <td th:text="${item.birth_date}"></td>
                                <td th:text="${item.name}"></td>
                                <td th:text="${item.rank}"></td>
                            </tr>
                            </tbody>
                        </div>
                    </table>
                </div>
                <ul class="actions" style="justify-content: right">
                    <li><a href="#" class="button">전체보기</a></li>
                </ul>
            </section>


            <!-- 최근 로그인 정보 테이블 ---------------------------------------------------------------------------------------------->
            <!--
             최근 로그인을 불러오는 순서
             1. 로그인 진행
             2. 로그인 성공시 controller에서 mainPage로 model.addAtrribuute로 최근 로그인 정보 통신으로 받은 데이터 같이 넘겨주기
             3. 메인페이지 에서 하단 부분 사이드바 불러오는  부분에 해당 데이터를 사이드 바에서 읽을 수 있도록 추가해서 적어준다
             4. 아래 처럼 불러와 사용
             (빨간줄 : 값이 아직 들어있는게 아니기 때문에 빈 값이 들어올 수 있기 때문???)
             -->
            <!--                        <div th:fragment="sideBarFragment(activeMenu)">-->
            <!--                            &lt;!&ndash; sideBar의 내용 &ndash;&gt;-->

            <!--                            &lt;!&ndash; sidebarData를 사용하여 데이터 표시 &ndash;&gt;-->
            <!--                            <div th:each="item : ${sidebarData}">-->
            <!--                                <span th:text="${item.ip}"></span>-->
            <!--                                <span th:text="${item.device}"></span>-->
            <!--                                <span th:text="${item.created_at}"></span>-->
            <!--                            </div>-->
            <!--                        </div>-->

            <!-- Table -->
            <div th:fragment="sideBarFragment(activeMenu)">
                <div class="table-wrapper">
                    <header class="major">
                        <h2>최근 로그인 정보</h2>
                    </header>
                    <table>
                        <thead>
                        <tr>
                            <th style="text-align: center">일시</th>
                            <th style="text-align: center">IP</th>
                            <th style="text-align: center">접속기기</th>
                        </tr>
                        </thead>
                        <div th:each="item : ${sidebarData}">
                            <tbody style="text-align: center">
                            <tr>
                                <td th:text="${#strings.substring(item.created_at,0, 11)}"></td>
                                <!-- 시간 자르고 날짜만 보여주기 -->
                                <td th:text="${item.ip}"></td>
                                <td th:text="${item.device}"></td>
                            </tr>
                            </tbody>
                        </div>
                    </table>
                </div>
            </div>


            <!-- Section(간단 설명) --------------------------------------------------------------------------------------------------->
            <section>
                <header class="major">
                    <h2>소방 연락망</h2>
                </header>
                <p>※급한 경우 외에는 동아리 카톡방 혹은 메일로 연락 바랍니다.</p>
                <ul class="contact">
                    <li class="icon solid fa-envelope"><a href="#" th:text="${emergencyInfo.email}">information@naver.com</a>
                    </li>
                    <li class="icon solid fa-phone" th:text="${#strings.substring(emergencyInfo.phone, 1, 13)}">
                        010-1234-3333
                    </li>
                    <li class="icon solid fa-home" th:text="${emergencyInfo.location}">배재대학교 정보과학관 C401<br/>
                </ul>
            </section>

            <!-- Footer -->
            <footer id="footer">
                <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>.
                    Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
            </footer>

        </div>
    </div>

    <!-- 사이드바에서 필요한 자바스크립트 -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" th:inline="javascript">
        // var clubCode = [[${dateCnt}]];
        //console.log(username);
    </script>
    <script src="/js/sideBarAjax.js"></script>

</header>



